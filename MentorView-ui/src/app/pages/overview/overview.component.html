<div class="overview-container">
  <header class="overview-header">
    <div class="header-content">
      <div class="time-filters">
        <span class="filter-label">Show data from the last</span>
        <div class="dropdown-filter">
          <button class="filter-button">7 days <span class="dropdown-icon">‚ñæ</span></button>
        </div>
        <span class="filter-label">by</span>
        <div class="dropdown-filter">
          <button class="filter-button">all <span class="dropdown-icon">‚ñæ</span></button>
        </div>
      </div>
      
      <div class="date-info">
        <span class="streak-icon">üî•</span>
        <span class="streak-text">5 DAY STREAK</span>
        <span class="date-text">11 March 2025</span>
      </div>
    </div>
  </header>

  <main class="overview-content">
    <!-- Focus Analytics Section -->
    <section class="analytics-section">
      <h2 class="section-title">FOCUS ANALYTICS</h2>
      
      <div class="tabs-container">
        <div class="tabs">
          <button class="tab-button active">Filler Words</button>
          <button class="tab-button">Pacing</button>
          <button class="tab-button">Questions Asked</button>
          <div class="spacer"></div>
          <div class="focus-selector">
            <button class="focus-button">
              <span class="info-icon">i</span>
              Choose a focus
            </button>
          </div>
        </div>
        
        <div class="tab-content">
          <!-- Hide all content until we can determine what to show -->
          <ng-container *ngIf="initialLoadComplete; else loadingContent">
            <!-- Only show no data message if explicitly confirmed there's no data -->
            <div *ngIf="confirmedNoData" class="no-data-container">
              <div class="no-data-icon">üìä</div>
              <h3 class="no-data-title">No data yet!</h3>
              <p class="no-data-text">Practice now for 30 seconds to get an initial diagnostic on your filler words.</p>
              <button class="practice-button">Practice Now</button>
            </div>
            
            <!-- Data Available State - Only shown if we have data -->
            <div *ngIf="!confirmedNoData" class="filler-words-data">
              <div class="data-header">
                <h3 class="data-title">Filler Word Analysis</h3>
                <div class="data-stats">
                  <div class="stat-value">{{(aggregatedFillerWordData || fillerWordData)?.percentage}}%</div>
                  <div class="status-indicator" [ngClass]="getFillerWordClass()">
                    {{getFillerWordStatus()}}
                  </div>
                </div>
                <p class="data-description">
                  Of your words are fillers across all interviews. The average speaker uses 5-6% filler words.
                </p>
              </div>
              
              <div class="data-details">
                <h4>Your most common filler words:</h4>
                <ul class="top-filler-words">
                  <li *ngFor="let word of getTopFillerWords()">
                    <span class="word">{{word.word}}</span>
                    <span class="count">({{word.count}} times)</span>
                  </li>
                  <li *ngIf="getTopFillerWords().length === 0">No filler words detected yet</li>
                </ul>
                <div class="total-stats">
                  <div class="stat-item">
                    <span class="stat-label">Total filler words:</span>
                    <span class="stat-number">{{(aggregatedFillerWordData || fillerWordData)?.totalFillerWords}}</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">Total words analyzed:</span>
                    <span class="stat-number">{{(aggregatedFillerWordData || fillerWordData)?.totalWords}}</span>
                  </div>
                </div>
              </div>
              
              <!-- Filler Words Line Graph -->
              <div class="filler-words-graph">
                <h4 class="graph-title">Your progress over time</h4>
                <div class="graph-container">
                  <!-- Simple SVG Line Graph -->
                  <svg width="100%" height="100%" viewBox="0 0 600 200" preserveAspectRatio="none">
                    <!-- Graph Grid Lines -->
                    <line x1="0" y1="0" x2="600" y2="0" stroke="rgba(255,255,255,0.1)" stroke-width="1" />
                    <line x1="0" y1="50" x2="600" y2="50" stroke="rgba(255,255,255,0.1)" stroke-width="1" />
                    <line x1="0" y1="100" x2="600" y2="100" stroke="rgba(255,255,255,0.1)" stroke-width="1" />
                    <line x1="0" y1="150" x2="600" y2="150" stroke="rgba(255,255,255,0.1)" stroke-width="1" />
                    <line x1="0" y1="199" x2="600" y2="199" stroke="rgba(255,255,255,0.1)" stroke-width="1" />
                    
                    <!-- Vertical Grid Lines -->
                    <line *ngFor="let date of fillerWordsHistory.dates; let i = index" 
                          [attr.x1]="(i * 100)" [attr.y1]="0" 
                          [attr.x2]="(i * 100)" [attr.y2]="200" 
                          stroke="rgba(255,255,255,0.1)" stroke-width="1" />
                    
                    <!-- Line Graph -->
                    <polyline 
                      [attr.points]="createLineGraphPoints(fillerWordsHistory.percentages)"
                      fill="none" 
                      stroke="#6200ea" 
                      stroke-width="3"
                      stroke-linecap="round"
                      stroke-linejoin="round" />
                    
                    <!-- Data Points -->
                    <g *ngFor="let percentage of fillerWordsHistory.percentages; let i = index">
                      <circle 
                        [attr.cx]="(i * 100)" 
                        [attr.cy]="200 - (percentage * 10)" 
                        r="5" 
                        fill="#6200ea" />
                        
                      <text 
                        [attr.x]="(i * 100)" 
                        [attr.y]="200 - (percentage * 10) - 15" 
                        text-anchor="middle" 
                        fill="white" 
                        font-size="12">
                        {{percentage}}%
                      </text>
                      
                      <!-- X-Axis Labels (Dates) -->
                      <text 
                        [attr.x]="(i * 100)" 
                        [attr.y]="195" 
                        text-anchor="middle" 
                        fill="#b3b3b3" 
                        font-size="11">
                        {{fillerWordsHistory.dates[i]}}
                      </text>
                    </g>
                  </svg>
                </div>
              </div>
            </div>
          </ng-container>
          
          <!-- Loading template shown during initial load -->
          <ng-template #loadingContent>
            <div class="loading-container">
              <div class="loading-spinner"></div>
              <p class="loading-text">Loading your data...</p>
            </div>
          </ng-template>
        </div>
      </div>
    </section>

    <!-- Insights Section -->
    <section class="insights-section">
      <h2 class="section-title">INSIGHTS</h2>
      
      <div class="insights-grid">
        <div class="insight-card">
          <h3 class="insight-title">See how you tend to start your sentences</h3>
          <button class="insight-action">Start Yoodlin' to find out</button>
        </div>
        
        <div class="insight-card">
          <h3 class="insight-title">Who's your celeb speaking match?</h3>
          <button class="insight-action">Start Yoodlin' to find out</button>
        </div>
        
        <div class="insight-card">
          <h3 class="insight-title">Get private, real-time coaching during your online meetings</h3>
          <button class="insight-action">Download the Yoodli desktop app</button>
        </div>
      </div>
    </section>
    
    <!-- Performance Stats -->
    <section class="performance-section">
      <h2 class="section-title">PERFORMANCE STATS</h2>
      
      <div class="stats-grid">
        <div class="stat-card wpm-card">
          <div class="stat-icon">üéØ</div>
          <div class="stat-info">
            <h3>Average Speaking Rate</h3>
            <div class="stat-value">{{ performanceData.averageWpm }} <span class="unit">WPM</span></div>
            <div class="status-indicator" [ngClass]="getPaceClass()">
              {{ performanceData.speakingPaceStatus }}
            </div>
          </div>
        </div>

        <div class="stat-card score-card">
          <div class="stat-icon">üèÜ</div>
          <div class="stat-info">
            <h3>Average Interview Score</h3>
            <div class="stat-value">{{ performanceData.averageScore }}<span class="unit">/10</span></div>
            <div class="status-indicator" [ngClass]="getScoreClass()">
              {{ performanceData.averageScore >= 8 ? 'Excellent' : performanceData.averageScore >= 6 ? 'Good' : 'Needs Improvement' }}
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>
