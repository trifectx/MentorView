<!-- Selected Question Display -->
<div class="current-question-panel" *ngIf="interviewDetails?.question">
    <div class="question-header">Current Interview Question</div>
    <div class="question-content">{{ interviewDetails.question }}</div>
</div>

<!-- Video Recording Section -->
<div [ngClass]="showCam ? 'show' : 'hide'" class="video-container">
    <h3 class="section-title">Interview Session</h3>
    <div class="video-wrapper">
        <video
            #video
            id="videoStream"
            class="video-player webcam-feed"
            autoplay
            controls
        ></video>
    </div>
    <div class="controls-container">
        <button class="btn btn-success" (click)="start()" [disabled]="isRecording">
            <i class="material-icons">videocam</i> Start Recording
        </button>
        <button class="btn btn-warning" (click)="stop()" [disabled]="!isRecording">
            <i class="material-icons">stop</i> Stop Recording
        </button>
        <button 
            class="btn" 
            [class.btn-primary]="isFacialRecognitionPaused"
            [class.btn-info]="!isFacialRecognitionPaused"
            (click)="toggleFacialRecognition()" 
            [disabled]="!isRecording"
            [title]="isFacialRecognitionPaused ? 'Start facial recognition' : 'Pause facial recognition'"
        >
            <i class="material-icons">face</i>
            {{ isFacialRecognitionPaused ? 'Start Facial Recognition' : 'Pause Facial Recognition' }}
        </button>
    </div>
</div>

<!-- Recorded Videos Section -->
<div [ngClass]="showVideos ? 'show' : 'hide'" class="video-container">
    <h3 class="section-title">Recorded Interview</h3>
    <div class="video-wrapper">
        <video
            #recordedVideo
            id="recordedVideo"
            class="video-player recorded-video"
            autoplay
            controls
        ></video>
    </div>
    
    <div class="controls-container">
        <button class="btn btn-info" (click)="getTranscript()">
            <i class="material-icons">description</i> Get Transcript
        </button>

        <button
            class="btn btn-secondary"
            (click)="getRating()"
            *ngIf="!loadingTranscript && transcript"
        >
            <i class="material-icons">star_rate</i> Get Rating
        </button>
    </div>

    <!-- Transcript Display Section -->
    <div *ngIf="loadingTranscript || transcript" class="result-section">
        <h3 class="result-title">Transcript:</h3>
        <pre class="transcript-text">{{ loadingTranscript ? "Loading transcript..." : transcript || "No transcript available" }}</pre>
    </div>

    <!-- Rating Display Section -->
    <div *ngIf="loadingRating || rating" class="result-section">
        <h3 class="result-title">Rating:</h3>
        <pre class="transcript-text">{{ loadingRating ? "Loading rating..." : rating || "No rating available" }}</pre>
    </div>
</div>
