<!-- Turn video on/off -->
<div class="d-flex justify-content-center">
    <button
        class="btn btn-primary"
        (click)="getCam()"
        [ngClass]="!showCam ? 'show' : 'hide'"
    >
        Turn The Video On
    </button>

    <div class="interview-setup" *ngIf="!transcript && !loadingRating">
        <h3>Interview Details</h3>
        <div class="form-group">
            <label for="role">Role:</label>
            <input
                type="text"
                id="role"
                [(ngModel)]="interviewDetails.role"
                placeholder="Enter the role"
                class="form-control"
            />
        </div>
        <div class="form-group">
            <label for="company">Company:</label>
            <input
                type="text"
                id="company"
                [(ngModel)]="interviewDetails.company"
                placeholder="Enter the company"
                class="form-control"
            />
        </div>
        <div class="form-group">
            <label for="interviewStyle">Interview Style:</label>
            <select
                id="interviewStyle"
                [(ngModel)]="interviewDetails.style"
                (change)="onStyleChange($event)"
                class="form-control"
            >
                <option value="">Select an interview style</option>
                <option *ngFor="let style of interviewStyles" [value]="style.id">
                    {{ style.name }}
                </option>
            </select>
        </div>
        <div class="form-group" *ngIf="selectedQuestions.length > 0">
            <label for="question">Select Question:</label>
            <select
                id="question"
                [(ngModel)]="interviewDetails.question"
                class="form-control"
            >
                <option value="">Select a question</option>
                <option *ngFor="let question of selectedQuestions" [value]="question">
                    {{ question }}
                </option>
            </select>
        </div>
    </div>

    <button
        class="btn btn-danger"
        (click)="stopCam()"
        [ngClass]="showCam ? 'show' : 'hide'"
    >
        Turn The Video Off
    </button>
</div>

<span class="m-2"></span>

<!-- Video Recording Section -->
<div [ngClass]="showCam ? 'show' : 'hide'" class="video-container">
    <video
        #video
        id="videoStream"
        autoplay
        controls
        class="video-player"
    ></video>
    <br />
    <button class="btn btn-success" (click)="start()" [disabled]="isRecording">
        Start Recording
    </button>
    <button class="btn btn-warning" (click)="stop()" [disabled]="!isRecording">
        Stop Recording
    </button>
</div>

<span class="m-2"></span>

<!-- Recorded Videos Section -->
<div [ngClass]="showVideos ? 'show' : 'hide'" class="video-container">
    <h2>Recorded Videos</h2>
    <video
        #recordedVideo
        id="videoStream"
        autoplay
        controls
        class="video-player"
    ></video>
    <br />

    <button class="btn btn-info" (click)="getTranscript()">
        Get Transcript
    </button>

    <!-- Transcript Display Section -->
    <div *ngIf="loadingTranscript || transcript">
        <h3>Transcript:</h3>
        <pre class="transcript-text">{{
            loadingTranscript
                ? "Loading transcript..."
                : transcript || "No transcript available"
        }}</pre>
    </div>

    <button
        class="btn btn-secondary"
        (click)="getRating()"
        *ngIf="!loadingTranscript && transcript"
    >
        Get Rating
    </button>

    <!-- Rating Display Section -->
    <div *ngIf="loadingRating || rating">
        <h3>Rating:</h3>
        <pre class="transcript-text">{{
            loadingRating
                ? "Loading rating..."
                : rating || "No rating available"
        }}</pre>
    </div>
</div>
